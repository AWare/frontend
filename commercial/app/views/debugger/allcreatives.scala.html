@(page: model.MetaData)(implicit request: RequestHeader)

@main(page){ }{
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
    jQuery(function($) {
        $("#switchFronts").click(function() {
            $('#head-css').attr('href', '@Static("stylesheets/head.facia.css")');
            $('#switchArticles').removeClass('current');
            $('#article').slideUp();
            $(this).addClass('current');
            return false;
        });

        $("#switchArticles").click(function() {
            $('#head-css').attr('href', '@Static("stylesheets/head.content.css")');
            $('#switchFronts').removeClass('current');
            $('#article').slideDown();
            $(this).addClass('current');
            return false;
        });

        $("#pageSkin").click(function() {
            $('body').toggleClass('has-page-skin');
           return false;
        });

        $("#dfp-number").on('change', function() {
            $('.commercial--dfp-multiple, .commercial--dfp-multiple').removeClass("commercial--items-dfp-2 commercial--items-dfp-3 commercial--items-dfp-4").addClass("commercial--items-dfp-" + this.value);
            return false;
        });

        $("#dfp-palette").on('change', function() {
            $('.commercial--dfp-single, .commercial--dfp-multiple, .commercial--v-high').removeClass("commercial--tone-brand commercial--tone-subscriptions commercial--tone-membership commercial--tone-live commercial--tone-jobs commercial--tone-networks commercial--tone-books commercial--tone-masterclasses commercial--tone-travel commercial--tone-shop commercial--tone-money commercial--tone-gardening").addClass("commercial--tone-" + this.value);
            return false;
        });
    });

    var loadCommercial = function (callback) {
        require(['core'])
            .next(['bootstraps/commercial'])
            .next(['bootstraps/creatives'])
            .then(callback) ;
    };
</script>
<style>
    pre {
        font-size: 11px;
    }
    hr {
        height: 8px;
        border: 0 none;
        border-top: 8px dashed #ddd;
        margin: 2em 0;
    }
    #dfp-ad--merchandising-high {
        display: block;
    }
    .test-page-head {
        font-size: 1.25rem;
    }
    .test-page-subhead {
        font-size: 0.875rem;
    }
    .facia-switch {
        font-family: sans-serif;
        font-size: 12px;
        margin: 0;
        border: 1px solid #ccc;
        border-right: 0;
        background: #fff;
        box-shadow: 0 0 2px rgba(0, 0, 0 ,0.3);
        overflow: hidden;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1100;
    }
    .facia-switch dt {
        color: #767676;
        padding: 6px 10px;
        margin: 0;
        display: inline-block;
    }
    .facia-switch dd {
        border-right: 1px solid #ccc;
        padding: 6px 10px;
        margin: 0;
        display: inline-block;
    }
    .has-page-skin {
        background-image: url(http://adimage.guardian.co.uk/pageskins/M34681-Guardian-takeover-Skin-1600x1200-6_1.gif);
        background-attachment: fixed;
        background-position: 50% 0;
    }
</style>

<div class="l-side-margins">

    <div class="facia-container__inner">
        <dl class="facia-switch">
            <dt>Layout</dt>
            <dd><a id="switchFronts" href="#">Fronts</a> • <a id="switchArticles" href="#" class="current">Articles</a> • <a id="pageSkin" href="#">Page skin?</a></dd>
            <dt>Items in multiple DFP</dt>
            <dd>
                <select id="dfp-number">
                    <option value="4">4</option>
                    <option value="3">3</option>
                    <option value="2">2</option>
                </select>
            </dd>
            <dt>Palette for single DFP</dt>
            <dd>
                <select id="dfp-palette">
                    <option value="brand">Brand</option>
                    <option value="subscriptions">Subscriptions</option>
                    <option value="membership">Membership</option>
                    <option value="live">Live</option>
                    <option value="jobs">Jobs</option>
                    <option value="networks">Networks</option>
                    <option value="books">Books</option>
                    <option value="masterclasses">Masterclasses</option>
                    <option value="travel">Travel</option>
                    <option value="shop">Shop</option>
                    <option value="money">Money</option>
                    <option value="gardening">Gardening</option>
                </select>
            </dd>
        </dl>
    </div>

    <article id="article" class="content content--article">
        <div class="gs-container">
            <h1 class="content__headline">All components</h1>
            <h3 class="test-page-subhead">Inline</h3>
            <div class="content__main-column content__main-column--article">
                <div class="from-content-api js-article__body">
                    <p>The relationship between Aronnax and Nemo is an intriguing dance between understanding and uneasiness. Initially, both of them delight in finding another academic mind. Aronnax is thrilled by the unexpected luxuries of the Nautilus, with its world-class collections of underwater treasures, inventively cooked seafood dishes and unending supply of seaweed cigars. Meanwhile, Nemo revels in showing off the Nautilus's capabilities to someone who understands them, taking Aronnax on little field trips to hunt sharks, visit the South Pole and explore the underwater city of Atlantis.</p>
                    <div id="dfp-ad--im" class="ad-slot ad-slot--dfp ad-slot--im ad-slot--im ad-slot--inline-book"></div>
                    <p>Nemo becomes increasingly sinister despite Aronnax's romanticised eye: he drugs his captives, refuses to explain the violent death of a crew member and alternates between sorrowful melancholia and cold fury. Ultimately it is Aronnax's transition from admiration and envy to complete fear that makes Twenty Thousand Leagues so eerie and exciting. At the climax when Nemo finally attacks a ship with Aronnax on board, the reader, Aronnax and the "archangel of hate" Nemo reach a satisfyingly simultaneous understanding. The two men watch in silence as the drowning sailors sink into an ocean crevasse like "a human antheap caught out by the invasion of the sea", and everyone finally understands that Nemo will never let his captors live. Later, when Aronnax literally crawls across the salon floor in complete darkness, desperate to avoid the sobbing Nemo who is playing his organ in the same room, my heart was pounding thrillingly hard. I've read Twenty Thousand Leagues multiple times and Nemo's madness still scares me.</p>
                    <p>Its episodic chapters may not appeal to some, but as a beach read, Twenty Thousand Leagues is the perfect book to pick up and put down. You are consistently rewarded with iconic scenes: a battle with a giant squid, an underwater funeral, a trip to Atlantis. Verne's detailed descriptions of geography and sea life fill me with a curiously Victorian sense of potential for discovering the unknown.</p>
                </div>
            </div>
        </div>
        <script>
            loadCommercial(function () {
                require(['common/modules/commercial/creatives/commercial-component'])
                    .then(function(
                        CommercialComponent
                    ) {
                        new CommercialComponent(document.querySelector('.ad-slot--inline-book'), {
                            type: 'book',
                            isbn: '9781781254165',
                            clickMacro: '%%CLICK_URL_ESC%%',
                            omnitureId: 'omnitureId'
                        }).create();
                    });
                });
            </script>
    </article>

    <hr/>

    <div class="fc-container">
        <div class="fc-container__inner">
            <h2 class="test-page-head">
                <a href="https://www.google.com/dfp/59666047#delivery/CreateCreativeTemplate/creativeTemplateId=10028487">Merchandising: commercial component</a>
            </h2>
        </div>
    </div>

    @Seq(
        Map(("name", "Best Buys"), ("type", "bestbuy"), ("hasMedium" -> false)),
        Map(("name", "Books"), ("type", "books"), ("hasMedium" -> true)),
        Map(("name", "Jobs"), ("type", "jobs"), ("hasMedium" -> false)),
        Map(("name", "Masterclasses"), ("type", "masterclasses"), ("hasMedium" -> false)),
        Map(("name", "Soulmates"), ("type", "soulmates"), ("hasMedium" -> false)),
        Map(("name", "Travel"), ("type", "travel"), ("hasMedium" -> false))
    ).map { component =>

        <div class="fc-container">
            <div class="fc-container__inner">
                <h2 class="test-page-head">@component("name")</h2>
            </div>
            @Seq("low", "medium", "high").map { relevance =>
                @if(relevance != "medium" || (relevance == "medium" && component("hasMedium") == true)) {
                    <div class="fc-container__inner">
                        <div class="fc-container__header">
                            <h3 class="fc-container__header__description">@relevance.capitalize relevance</h3>
                        </div>
                    </div>
                    <div class="ad-slot ad-slot--merchandising ad-slot--commercial-component dfp-ad--merchandising-@component("type")-@relevance"></div>
                    <script>
                        loadCommercial(function () {
                            require(['common/modules/commercial/creatives/commercial-component'])
                                .then(function(
                                    CommercialComponent
                                ) {
                                    new CommercialComponent(document.querySelector('.dfp-ad--merchandising-@component("type")-@relevance'), {
                                        type: '@component("type")@if(relevance == "high"){High}',
                                        clickMacro: '%%CLICK_URL_ESC%%',
                                        omnitureId: 'omnitureId'
                                    }).create();
                                });
                        });
                    </script>
                }
            }
        </div>

        <hr/>
    }

    <div class="fc-container">
        <div class="fc-container__inner">
            <h2 class="test-page-head">
                <a href="https://www.google.com/dfp/59666047#delivery/CreateCreativeTemplate/creativeTemplateId=10022487">Merchandising: blended component</a>
            </h2>
        </div>
        <div class="ad-slot ad-slot--merchandising ad-slot--commercial-component dfp-ad--merchandising-multi"></div>
        <script>
            loadCommercial(function () {
                require(['common/modules/commercial/creatives/commercial-component'])
                    .then(function(
                        CommercialComponent
                    ) {
                    new CommercialComponent(document.querySelector('.dfp-ad--merchandising-multi'), {
                        type: 'multi',
                        components: ['jobs', 'masterclasses', 'books', 'soulmates'],
                        clickMacro: '%%CLICK_URL_ESC%%',
                        omnitureId: 'omnitureId'
                    }).create();
                });
            });
        </script>
        </div>
    </div>

    <hr/>

    <div class="fc-container">
        <div class="fc-container__inner">
            <h2 class="test-page-head">
                <a href="https://www.google.com/dfp/59666047#delivery/CreateCreativeTemplate/creativeTemplateId=10023207">Merchandising: cAPI multiple</a>
            </h2>
            <form class="capi-multiple-paid-for-type">
                <label>Type:
                    <select>
                        <option value="advertisement-feature" selected>Advertisement Feature</option>
                        <option value="sponsored">Sponsored</option>
                        <option value="foundation-supported">Foundation Supported</option>
                    </select>
                </label>
            </form>
        </div>
        <div class="ad-slot ad-slot--dfp ad-slot--merchandising ad-slot--commercial-component ad-slot--capi-multiple"></div>
        <script>
            loadCommercial(function () {
                require([
                    'bean',
                    'qwery',
                    'common/utils/$',
                    'common/modules/commercial/creatives/commercial-component'
                ])
                    .then(function (
                        bean,
                        qwery,
                        $,
                        CommercialComponent
                    ) {
                        var $capiMultiple = $('.ad-slot--capi-multiple');

                        bean.on(qwery('.capi-multiple-paid-for-type')[0], 'change', function (event) {
                            var commercialComponent = new CommercialComponent($capiMultiple[0], {
                                type: 'capi',
                                t: ['p/43b2q','p/43945'],
                                l: 'http://pagead2.googlesyndication.com/pagead/imgad?id=CICAgKDjnfPJbBABGAEyCHbj_OBIEKp8',
                                ct: 'Led Zeppelin special',
                                cl: 'http://theguardian.com/music/ledzeppelin',
                                cal: 'http://theguardian.com/about',
                                k: 'music/ledzeppelin',
                                af: $(event.srcElement).val(),
                                clickMacro: '%%CLICK_URL_ESC%%',
                                omnitureId: "omnitureId"
                            });

                            commercialComponent.postLoadEvents.capi = function () {
                                $capiMultiple.removeClass('lazyloaded');
                            };
                            commercialComponent.create();
                        });

                        bean.fire(qwery('.capi-multiple-paid-for-type select')[0], 'change');
                    });
            });
        </script>
    </div>

    <hr/>

    <div class="fc-container">
        <div class="fc-container__inner">
            <h2 class="test-page-head">
                <a href="https://www.google.com/dfp/59666047#delivery/CreateCreativeTemplate/creativeTemplateId=10026447">Merchandising: cAPI single</a>
            </h2>
            <form class="capi-single-paid-for-type">
                <label>Type:
                    <select>
                        <option value="advertisement-feature" selected>Advertisement Feature</option>
                        <option value="sponsored">Sponsored</option>
                        <option value="foundation-supported">Foundation Supported</option>
                    </select>
                </label>
            </form>
        </div>
        <div class="ad-slot ad-slot--dfp ad-slot--merchandising ad-slot--commercial-component ad-slot--capi-single"></div>
        <script>
            loadCommercial(function () {
                require([
                    'bean',
                    'qwery',
                    'common/utils/$',
                    'common/modules/commercial/creatives/commercial-component'
                ])
                    .then(function(
                        bean,
                        qwery,
                        $,
                        CommercialComponent
                    ) {
                        var $capiSingle = $('.ad-slot--capi-single');

                        bean.on(qwery('.capi-single-paid-for-type')[0], 'change', function (event) {
                            var commercialComponent = new CommercialComponent($capiSingle[0], {
                                type: 'capiSingle',
                                t: 'p/43b2q',
                                l: 'http://pagead2.googlesyndication.com/pagead/imgad?id=CICAgKDjnfPJbBABGAEyCHbj_OBIEKp8',
                                ct: 'This is title',
                                cl: 'http://theguardian.com/music/ledzeppelin',
                                clt: 'Read more link text',
                                cal: 'http://theguardian.com/about',
                                k: 'music/ledzeppelin',
                                rmd: 'www.theguardina.com',
                                rmt: 'Seemoreoverhere',
                                af: $(event.srcElement).val(),
                                clickMacro: '%%CLICK_URL_ESC%%',
                                omnitureId: "omnitureId"
                            });

                            commercialComponent.postLoadEvents.capiSingle = function () {
                                $capiSingle.removeClass('lazyloaded');
                            };
                            commercialComponent.create();
                        });

                        bean.fire(qwery('.capi-single-paid-for-type select')[0], 'change');
                    });
            });
        </script>
    </div>

    <hr />

    <div class="fc-container">
        <div class="fc-container__inner">
            <h2 class="test-page-head">
                <a href="https://www.google.com/dfp/59666047#delivery/CreateCreativeTemplate/creativeTemplateId=10025847">Merchandising: manual multiple</a>
            </h2>
        </div>
        <div class="ad-slot ad-slot--dfp ad-slot--merchandising ad-slot--commercial-component ad-slot--ad-multiple-manual"></div>
        <script>
            loadCommercial(function () {
                require(['common/modules/commercial/creatives/template'])
                    .then(function (Creative) {
                        new Creative(document.querySelector('.ad-slot--ad-multiple-manual'), {
                            creative: 'ad-multiple-manual',
                            title: 'A Title',
                            explainer: 'Explainer text',
                            base__url: 'http://www.theguardian.com/uk',
                            offerlinktext: 'Offer link text',
                            viewalltext: 'View all text',
                            offeramount: 'offer-amount',
                            relevance: 'high',
                            Toneclass: 'commercial--tone-brand',
                            offer1title: 'Offer 1 Title',
                            offer1url: 'http://www.theguardian.com/uk',
                            offer1meta: 'Offer 1 Meta',
                            offer1image: 'http://www.catgifpage.com/gifs/247.gif',
                            offer2title: 'Offer 2 Title',
                            offer2url: 'http://www.theguardian.com/uk',
                            offer2meta: 'Offer 1 Meta',
                            offer2image: 'http://www.catgifpage.com/gifs/247.gif',
                            offer3title: 'Offer 3 Title',
                            offer3url: 'http://www.theguardian.com/uk',
                            offer3meta: 'Offer 1 Meta',
                            offer3image: 'http://www.catgifpage.com/gifs/247.gif',
                            offer4title: 'Offer 4 Title',
                            offer4url: 'http://www.theguardian.com/uk',
                            offer4meta: 'Offer 1 Meta',
                            offer4image: 'http://www.catgifpage.com/gifs/247.gif',
                            omnitureId: '[%OmnitureID%]',
                            clickMacro: '%%CLICK_URL_ESC%%'
                        }).create();
                    });
            });
        </script>
    </div>

    <hr />

    <div class="fc-container">
        <div class="fc-container__inner">
            <h2 class="test-page-head">
                <a href="https://www.google.com/dfp/59666047#delivery/CreateCreativeTemplate/creativeTemplateId=10025607">Merchandising: manual single</a>
            </h2>
        </div>
        <div class="ad-slot ad-slot--dfp ad-slot--merchandising ad-slot--commercial-component" data-name="merchandising-single-manual"></div>
        <script>
            loadCommercial(function () {
                require(['common/modules/commercial/creatives/template'])
                    .then(function (Creative) {
                        new Creative(document.querySelector('[data-name="merchandising-single-manual"]'), {
                            creative: "ad-single-manual",
                            toneClass: "commercial--tone-brand",
                            omnitureId: "[%omnitureid%]",
                            baseUrl: "http://www.theguardian.com/technology/2014/nov/20/apple-beats-music-iphone-ipad-spotify",
                            title: "title",
                            viewAllText: "View all",
                            offerTitle: "Scientists climb to bottom of Siberian sinkhole - in pictures",
                            offerImage: "http://pagead2.googlesyndication.com/pagead/imgad?id=CICAgKDjk-jQkgEQARgBMghE750kQXQwJg",
                            offerText: "A Russian research team including scientists, a medic and a professional climber has descended a giant sinkhole on the Yamal Peninsula in northern Siberia. Photographs by Vladimir Pushkarev/Siberian Times",
                            offerLinkText: "link text",
                            offerUrl: "http://www.theguardian.com/technology/2014/nov/20/apple-beats-music-iphone-ipad-spotify",
                            seeMoreUrl: "http://www.theguardian.com/technology/2014/nov/20/apple-beats-music-iphone-ipad-spotify",
                            showCtaLink: "show-cta-link",
                            clickMacro: "%%CLICK_URL_ESC%%"
                        }).create();
                    });
            });
        </script>
    </div>
</div>
}
