@(model: FixturesPage, json: Boolean = false)(implicit request: RequestHeader)
@import support._


@render(model: FixturesPage) = {

@model.days.map{ day =>
    <h2 class="competition-date">@day.date.toString("EEEE d MMMM yyyy")</h2>
    @day.competitions.map{ comp =>
        <h3 class="competition-title">
            <a href='@comp.url'>@comp.fullName</a>
        </h3>
        <ol class="fixtures">
            @comp.results.map{ result =>
            <li>
                <p class="fixture-desc">
                    <span class="home team">@ShortName(result.homeTeam)</span>
                    <span class="result">@result.homeTeam.score - @result.awayTeam.score</span>
                    <span class="away team">@ShortName(result.awayTeam)</span>
                </p>
                <p class="status"><span class="status-desc">Kick-off:</span> @result.date.toString("HH:mm")</p>
            </li>
            }

            @comp.fixtures.map{ fixture =>
            <li>
                <p class="fixture-desc">
                    <span class="home team">@fixture.homeTeam.name</span>
                    <span class="result">v</span>
                    <span class="away team">@fixture.awayTeam.name</span>
                </p>
                <p class="status"><span class="status-desc">Kick-off:</span> @fixture.fixtureDate.toString("HH:mm")</p>
            </li>
            }
        </ol>
    }
  }
}


@* Just render the stats if this is a json call *@
@if(json){
    @render(model)

@* Render page boilderplate if it is an HTML call *@
} else {

    @main(model.page, Static, Configuration, Switches.all){
        <link rel="stylesheet" type="text/css" href="@Static("stylesheets/football.min.css")" />
    }{
        <h1>All fixtures</h1>

        @model.previousPage.map{url => <a href="@url" data-link-name="previous fixtures">previous</a>}

        &nbsp; &nbsp;

        @model.nextPage.map{url => <a href="@url" data-link-name="next fixtures">next</a>}

        @render(model)
    }
}