@(model: MatchesPage)

@model.days.map{ day =>
<h2 class="competitions-date box-indent type-4">@day.date.toString("EEEE d MMMM yyyy")</h2>
<ol class="competitions unstyled" data-link-name="matches">
    <li class="competition">
        @day.competitions.zipWithRowInfo.map{ case (comp, row) =>
            <h3 class="competition-title box-indent type-3">
                <a href="@comp.url" data-link-name="competition">@comp.fullName</a>
                <i class="icon-filter-arrow-right"></i>
            </h3>
            <ol class="matches box-indent unstyled">
                @comp.matches.map{
                    case fixture: pa.Fixture                        => { @fragments.fixture(fixture) }
                    case result: pa.Result                          => { @fragments.result(result) }
                    case matchDay: pa.MatchDay if matchDay.result   => { @fragments.result(matchDay) }
                    case matchDay: pa.MatchDay                      => { @fragments.liveMatch(matchDay) }
                }
            </ol>
            @* Shows the live blog (if there is one) after the first competition *@
            @if(row.isFirst){
                @model.blog.map{ blog => @fragments.formatTrail(blog, row) }
            }
        }
    </li>
</ol>
}
