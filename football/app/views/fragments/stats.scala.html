@(matchEvents: Option[pa.MatchEvents], matchStats: Option[pa.MatchStats])

@renderGoal(goal: pa.Event) = {
    <li>@goal.players.map{p => @p.name}.mkString(", ") @goal.matchTime</li>
}

@renderStat(name: String, home: Int, away: Int, percent: Boolean = false) = {
    @defining( (100.0 / (home + away) * home).toInt){ homePercent =>
        <table>
        <thead>
                <th colspan="2">@Html(name)</th>
            </thead>
            <tbody>
            <tr>

                <td class="home" width="@{homePercent}%">
                    @{home}@if(percent){%}
                </td>
                <td class="away" width="@{100 - homePercent}%">
                    @{away}@if(percent){%}
                </td>
            </tr>
            </tbody>
        </table>
    }
}

<div>
    <ul>
        <li><a id="football-tab-matchreport" href="javascript://">Match report</a></li>
        <li><a id="football-tab-stats" href="javascript://">Stats</a></li>
    </ul>
</div>
<div id="football-stats" class="initially-off">

@matchEvents.map{ events =>
    <table>
        <thead>
        <tr>
            <th width="50%">@events.homeTeam.name</th><th width="50%">@events.awayTeam.name</th>
        </tr>
        </thead>
        <thead>
            <tr>
                <th colspan="2">goals</th>
            </tr>
        </thead>
        <tbody>
        <tr>

            <td>
                <ol>
                @{events.homeTeamGoals.map{ renderGoal }}
                </ol>
            </td>
            <td>
                <ol>
                @{events.awayTeamGoals.map{ renderGoal }}
                </ol>                         ca
            </td>
        </tr>
        </tbody>
    </table>
}

@matchStats.map{ stats =>
    @renderStat("possession", stats.homePossession, stats.awayPossession, percent=true)
    @renderStat("corners", stats.homeTeam.corners, stats.awayTeam.corners)
    @renderStat("on target", stats.homeTeam.shotsOnTarget, stats.awayTeam.shotsOnTarget)
    @renderStat("off target", stats.homeTeam.shotsOffTarget, stats.awayTeam.shotsOffTarget)
    @renderStat("fouls", stats.homeTeam.fouls, stats.awayTeam.fouls)
    @renderStat("offsides", stats.homeTeam.offsides, stats.awayTeam.offsides)
}
</div>