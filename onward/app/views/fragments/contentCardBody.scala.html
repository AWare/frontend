@(content: model.Content)(implicit request: RequestHeader)


@import views.support.{ImgSrc, Item140}
@import views.support.TrailCssClasses.toneClass
@import model.Tag
@import views.support.RenderClasses

<div class="content-card item item--content-card @toneClass(content)--item @RenderClasses(Map(
    "item--video" -> content.isVideo,
    "item--gallery" -> content.isGallery,
    "item--audio" -> content.isAudio,
    "content-card--byline-pic" -> (content.hasTonalHeaderByline && content.hasLargeContributorImage)
    ))"
    data-link-name="content-card" data-component="content-card">

    <div class="item__container">

        @if(content.isGallery) {
            @content.trailPicture(5, 3).map { image =>
                <img class="item__gallery-img js-image-upgrade" src="@Item620.bestFor(image)"/>
            }
        }

        <div class="item__header">
            <h1 class="item__title">
                <a class="item__link">
                    @if(content.isAnalysis) {
                        <span class="item__kicker">Analysis</span>
                    }
                    @if(content.isLiveBlog && content.isLive) {
                        <span class="item__kicker"><span class="item__live"><span class="live-pulse-icon"></span>Live</span></span>
                    }
                    @if(content.isPodcast) {
                        @content.seriesTag.map { series => <span class="item__kicker">@series.webTitle</span> }
                    }
                    @content.headline
                </a>
            </h1>
            @if(content.isComment) {
                <div class="item__byline">
                 - @content.byline.map { byline => @Html(byline) }
                </div>
            }
            @content.starRating.map { stars => @fragments.items.elements.starRating(stars) }
        </div>

        @if(!content.isGallery) {
            <div class="item__standfirst u-cf">
            @if(content.isLiveBlog){
                @content.trailText.map{ trailText => @Html(trailText) }
            } else {
                <div>
                @content.standfirst.map { standfirst => @Html(standfirst) }
                </div>
            }
            </div>
            @if(content.hasTonalHeaderByline && content.hasLargeContributorImage) {
                @content.contributors.headOption.map { profile =>
                    @profile.contributorLargeImagePath.map{ image =>
                        <div class="content-card__byline-img">
                            <img class="content-card__byline-img__img" src="@image" alt="@profile.name" />
                        </div>
                    }
                }
            }
            @*<div class="u-h meta__number" data-discussion-id="@content.discussionId"/>*@
        }
    </div>

    <a class="item__link u-faux-block-link__overlay" href="@content.webUrl" target="_blank"></a>
</div>

