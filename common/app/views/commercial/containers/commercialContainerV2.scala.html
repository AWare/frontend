@(containerModel: common.commercial.ContainerModel)(implicit request: RequestHeader)

@import common.{Edition, LinkTo}
@import views.html.commercial.containers._
@import views.html.fragments.inlineSvg

@views.html.commercial.containerWrapper(Seq("legacy", "capi", "tone-capi"),
                  optKicker = Some(fragments.commercial.paidForMeta()),
                  optStamp = Some(stamp),
                  optSponsorship = containerModel.metaData.sponsorData match {
                      case Some(data) => Some(data.sponsorshipType)
                      case _ => None
                  },
                  optSponsor = containerModel.metaData.sponsorData match {
                      case Some(data) => data.sponsor
                      case _ => None
                  },
                  optKeywords = containerModel.metaData.sponsorData match {
                      case Some(data) => data.keywordId
                      case _ => None
                  },
                  optSeries = containerModel.metaData.sponsorData match {
                      case Some(data) => data.seriesId
                      case _ => None
                  },
                  optBadge = containerModel.metaData.sponsorData match {
                      case Some(_) => Some(Html(" "))
                      case _ => None
                  }
                  ){

    <a class="adverts__logo u-text-hyphenate" href="@containerModel.content.targetUrl">@containerModel.content.title</a>

}{

    @containerModel.metaData.layoutName match {
        case "fixed/small/slow-I"            => { @fixedSmallSlowI(containerModel) }
        case "fixed/small/slow-III"          => { @fixedSmallSlowIII(containerModel) }
        case "fixed/small/slow-IV"           => { @fixedSmallSlowIV(containerModel) }
        case "fixed/small/slow-V-half"       => { @fixedSmallSlowVHalf(containerModel) }
        case "fixed/small/slow-V-third"      => { @fixedSmallSlowVThird(containerModel) }
        case "fixed/small/fast-VIII"         => { @fixedSmallFastVIII(containerModel) }
        case "fixed/medium/slow-VI"          => { @fixedMediumSlowVI(containerModel) }
        case "fixed/medium/slow-VII"         => { @fixedMediumSlowVII(containerModel) }
        case "fixed/medium/fast-XI"          => { @fixedMediumFastXI(containerModel) }
        case "fixed/medium/fast-XII"         => { @fixedMediumFastXII(containerModel) }
        case "fixed/large/slow-XIV"          => { @fixedLargeSlowXIV(containerModel) }
        case _ => {
            <p>@containerModel.metaData.layoutName</p>
        }
    }

    @if(!containerModel.metaData.hideShowMore && containerModel.content.extraCardContents.nonEmpty){
        <details class="adverts__more">
            <summary class="button button--medium button--primary button--show-more">
                @fragments.inlineSvg("plus", "icon")
                @fragments.inlineSvg("minus", "icon")
                More @containerModel.content.title
            </summary>
            @defining(Math.max(1, Math.floor(containerModel.content.extraCardContents.length / 3).toInt)) { length =>
                <div class="adverts__row">
                    <div class="adverts__column">
                        @containerModel.content.extraCardContents.take(length).map(card => views.html.commercial.cards.itemSmallCard(card))
                    </div>
                    <div class="adverts__column">
                        @containerModel.content.extraCardContents.slice(length, length * 2).map(card => views.html.commercial.cards.itemSmallCard(card))
                    </div>
                    <div class="adverts__column">
                        @containerModel.content.extraCardContents.slice(length * 2, length * 3).map(card => views.html.commercial.cards.itemSmallCard(card))
                    </div>
                </div>
            }
        </details>
    }
}

@stamp = {

    <a @if(Edition(request).id == "AU") {
            href="@LinkTo("/guardian-labs-australia")"
        } else {
            href="@LinkTo("/guardian-labs")"
        }
        >
        @inlineSvg("glabs-logo", "logo")
        <span class='u-h'>Guardian Labs</span>
    </a>

}
