@(item: MetaData, config: common.GuardianConfiguration, static: StaticAssets)(implicit request: RequestHeader)

<script id="gu">

    var guardian = {};

    var require = {
        baseUrl: '@{config.static.path}javascripts',
        paths: {
            'common': '@static("javascripts/common.js")',
            'bootstraps/article': '@static("javascripts/bootstraps/article.js")'
        }
    };
    // FIXME
    require.paths.common  = require.paths.common.replace('.js', '');
    require.paths['bootstraps/article'] = require.paths['bootstraps/article'].replace('.js', '');

    var script = document.createElement('script');
    script.async = 'async';
    script.src = '@static("javascripts/vendor/require-2.0.4.js")';
    script.onload = function() {

        define('config', function(){
            return {
                isModernBrowser: ('querySelector' in document && 'addEventListener' in window),
                page: {

                    @item.metaData.map{ case(key, value) =>
                        '@{JavaScriptVariableName(key)}': '@{JavaScriptValue(value.toString)}'
                    }.mkString(","),

                    @config.javascript.pageData.map{ case (key, value) =>
                        '@{JavaScriptVariableName(key.split('.').last)}': '@value'
                    }.mkString(","),

                    'edition': '@Edition(request, config)'
                }
            };
        })

        require(['config', 'bootstraps/article'], function(config, article) {
            article.init(config);
        });

    };

    document.getElementById('gu').parentNode.insertBefore(script);

</script>
