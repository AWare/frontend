@(collection: model.Collection, containerLayout: layout.ContainerLayout, containerIndex: Int, frontProperties: model.FrontProperties = model.FrontProperties.empty, dataId: String)(implicit request: RequestHeader, templateDeduping: views.support.TemplateDeduping, config: com.gu.facia.client.models.CollectionConfig)


@import views.support.GetClasses
@import views.html.fragments.containers.facia_cards.{show_more, slice, containerHeader}
@import model.FaciaComponentName
@import dfp.DfpAgent
@import common.Localisation

@defining(config.displayName.orElse(collection.displayName)) { case (title) =>
    <section id="@FaciaComponentName(config, collection)"
             class="@GetClasses.forNewStyleContainer(config, containerIndex == 0, title.nonEmpty)"
             data-link-name="@{containerIndex + 1} | @FaciaComponentName(config, collection)"
             data-id="@dataId"
             @DfpAgent.sponsorshipTag(config).map { keyword =>
                 data-keywords="@keyword"
             }
             @DfpAgent.sponsorshipType(config).map { sponsorshipType =>
                 data-sponsorship="@sponsorshipType"
             }
             data-component="@FaciaComponentName(config, collection)">
        <div class="facia-container__inner">
            @containerHeader(collection, frontProperties, containerIndex)
            @title.map { title =>
                <div class="container__body fc-container__body container--rolled-up-hide fc-show-more--hidden js-container--fc-show-more"
                data-title="@Html(Localisation(title))">
                    @for(sliceWithCards <- containerLayout.slices) {
                        @slice(sliceWithCards, containerIndex)
                    }

                    @show_more(containerLayout.remainingCards, containerIndex)
                </div>
            }
        </div>
    </section>
}
