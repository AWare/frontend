@(containerType: slices.CommercialContainerType, container: layout.FaciaContainer, frontProperties: model.FrontProperties)(implicit request: RequestHeader)

@import conf.switches.Switches
@import layout.{ColumnAndCards, ContentCard}
@import model.InlineImage
@import slices.{MultiCampaign, SingleCampaign}
@import views.html.fragments.containers.facia_cards.standardContainer
@import views.html.fragments.inlineSvg
@import views.html.fragments.items.elements.facia_cards.{itemImage, title}
@import views.support.RemoveOuterParaHtml

    @containerType match {

    case SingleCampaign(_) => {
        @if(Switches.NewCommercialContent.isSwitchedOn) {

        <div class="fc-container fc-container--commercial">
            <div class="ad-slot ad-slot--dfp ad-slot--merchandising ad-slot--commercial-component">
                <div class="commercial commercial--paidfor commercial--tone-paidfor">
                    <div class="commercial__inner">
                        <div class="commercial__header">
                            <div class="paidfor-meta">
                                <span class="paidfor-meta__label">Paid Content</span>
                                <div class="paidfor-label paidfor-meta__more has-popup">
                                    <button class="u-button-reset paidfor-label__btn popup__toggle">About @inlineSvg("arrow-down", "icon")</button>
                                    <div class="popup is-off paidfor-popup paidfor-popup--test3">
                                        <h3 class="paidfor-popup__title">Paid stories are paid for and controlled by an advertiser</h3>
                                        <a class="paidfor-popup__link" href="#">Learn more about the Guardian’s funding from outside parties @inlineSvg("arrow-right", "icon")</a>
                                    </div>
                                </div>
                            </div>
                            <h3 class="commercial__title">@container.displayName</h3>
                            <a class="commercial__cta" href="http://www.theguardian.com/guardian-labs">@inlineSvg("glabs-logo", "logo")</a>
                        </div>
                        <div class="commercial__body">
                            <ul class="lineitems">
                                @for(layout <- container.containerLayout) {
                                    @for( slice <- layout.slices) {
                                        <div class="fc-slice-wrapper">
                                            <ul class="u-unstyled l-row  l-row--cols-@slice.numberOfCols fc-slice fc-slice--@slice.cssClassName">
                                                @for(ColumnAndCards(_, cards) <- slice.columns) {
                                                    @for(card <- cards) {
                                                        @card.item match {
                                                            case content: ContentCard => {
                                                                <li class="lineitem">
                                                                    <div class="rich-link tone-paidfor--item">
                                                                        <div class="rich-link__container">
                                                                            <div class="fc-item__image-container u-responsive-ratio">
                                                                                @for(InlineImage(imageContainer) <- content.displayElement) {
                                                                                    @itemImage(imageContainer.images)
                                                                                }
                                                                            </div>
                                                                            <div class="rich-link__header">
                                                                                <h2 class="rich-link__title">
                                                                                    <a class="rich-link__link">@title(content.header, card.index, container.index)</a>
                                                                                </h2>
                                                                            </div>
                                                                            <div class="rich-link__standfirst u-cf">@for(text <- content.trailText) {@Html(text)}</div>
                                                                            <a class="rich-link__link u-faux-block-link__overlay" @Html(content.header.url.hrefWithRel)>@RemoveOuterParaHtml(content.header.headline)</a>
                                                                        </div>
                                                                    </div>
                                                                </li>
                                                            }
                                                            case _ => {}
                                                        }
                                                    }
                                                }
                                            </ul>
                                        </div>
                                    }
                                }
                            </ul>
                            <aside class="commercial__meta">Paid for by <img src="ben-jerrys.png"></aside>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        } else {

            <!-- TODO implement a single campaign -->
            @standardContainer(container, frontProperties)

        }
    }

    case MultiCampaign(_) => {
        @if(Switches.NewCommercialContent.isSwitchedOn) {

        <div class="fc-container fc-container--commercial" data-node-uid="1">
            <div class="ad-slot ad-slot--dfp ad-slot--merchandising ad-slot--commercial-component">
                <div class="commercial commercial--paidfor commercial--tone-paidfor">
                    <div class="commercial__inner">
                        <div class="commercial__header">
                            <div class="paidfor-meta">
                                <span class="paidfor-meta__label">Paid Content</span>
                                <div class="paidfor-label paidfor-meta__more has-popup">
                                    <button class="u-button-reset paidfor-label__btn popup__toggle" data-toggle="paidfor-popup--test2">
                                    About
                                        @fragments.inlineSvg("arrow-down", "icon")
                                    </button>
                                    <div class="popup is-off paidfor-popup paidfor-popup--test2">
                                        <h3 class="paidfor-popup__title">Paid stories are paid for and controlled by an advertiser</h3>
                                        <a class="paidfor-popup__link" href="#">
                                        Learn more about the Guardian’s funding from outside parties
                                            @fragments.inlineSvg("arrow-right", "icon")
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <h3 class="commercial__title">
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit
                            </h3>
                            <a class="commercial__cta" href="http://www.theguardian.com/guardian-labs">
                            @fragments.inlineSvg("glabs-logo", "logo")
                            </a>
                        </div>
                        <div class="commercial__body">
                            <ul class="lineitems">
                                <li class="lineitem">
                                    <div class="rich-link tone-paidfor--item">
                                        <div class="rich-link__container">
                                            <div class="fc-item__image-container u-responsive-ratio ">
                                                <img alt="" srcset="https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=220&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=f1861b3d4221b595bf92908f9c2f5c93 220w, https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=160&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=24b4b1aef3e4b537c8f8fc73de08b90d 160w, https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=127&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=57660040b46f0f5a40f5b4046af51f4a 127w" sizes="(min-width: 980px) 220px, (min-width: 740px) 160px, 127px">
                                            </div>
                                            <div class="rich-link__header">
                                                <h2 class="rich-link__title">
                                                    <a class="rich-link__link">How it feeds into age-old west v Islam narrative</a>
                                                </h2>
                                            </div>
                                            <div class="rich-link__standfirst u-cf">Republican candidate’s call for shutdown of US borders to Muslims will be seen by extremists as confirmation that war of ideals takes on yet another guise</div>
                                            <aside class="rich-link__meta">
                                            Paid for by <img src="gourmet.png">
                                        </aside>
                                            <a class="rich-link__link u-faux-block-link__overlay" href="#"></a>
                                        </div>
                                    </div>
                                </li>
                                <li class="lineitem">
                                    <div class="rich-link tone-paidfor--item">
                                        <div class="rich-link__container">
                                            <div class="fc-item__image-container u-responsive-ratio ">
                                                <img alt="" srcset="https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=220&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=f1861b3d4221b595bf92908f9c2f5c93 220w, https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=160&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=24b4b1aef3e4b537c8f8fc73de08b90d 160w, https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=127&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=57660040b46f0f5a40f5b4046af51f4a 127w" sizes="(min-width: 980px) 220px, (min-width: 740px) 160px, 127px">
                                            </div>
                                            <div class="rich-link__header">
                                                <h2 class="rich-link__title">
                                                    <a class="rich-link__link">How it feeds into age-old west v Islam narrative</a>
                                                </h2>
                                            </div>
                                            <div class="rich-link__standfirst u-cf">Republican candidate’s call for shutdown of US borders to Muslims will be seen by extremists as confirmation that war of ideals takes on yet another guise</div>
                                            <aside class="rich-link__meta">
                                            Paid for by <img src="gourmet.png">
                                        </aside>
                                            <a class="rich-link__link u-faux-block-link__overlay" href="#"></a>
                                        </div>
                                    </div>
                                </li>
                                <li class="lineitem">
                                    <div class="rich-link tone-paidfor--item">
                                        <div class="rich-link__container">
                                            <div class="fc-item__image-container u-responsive-ratio ">
                                                <img alt="" srcset="https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=220&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=f1861b3d4221b595bf92908f9c2f5c93 220w, https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=160&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=24b4b1aef3e4b537c8f8fc73de08b90d 160w, https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=127&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=57660040b46f0f5a40f5b4046af51f4a 127w" sizes="(min-width: 980px) 220px, (min-width: 740px) 160px, 127px">
                                            </div>
                                            <div class="rich-link__header">
                                                <h2 class="rich-link__title">
                                                    <a class="rich-link__link">How it feeds into age-old west v Islam narrative</a>
                                                </h2>
                                            </div>
                                            <div class="rich-link__standfirst u-cf">Republican candidate’s call for shutdown of US borders to Muslims will be seen by extremists as confirmation that war of ideals takes on yet another guise</div>
                                            <aside class="rich-link__meta">
                                            Paid for by <img src="gourmet.png">
                                        </aside>
                                            <a class="rich-link__link u-faux-block-link__overlay" href="#"></a>
                                        </div>
                                    </div>
                                </li>
                                <li class="lineitem">
                                    <div class="rich-link tone-paidfor--item">
                                        <div class="rich-link__container">
                                            <div class="fc-item__image-container u-responsive-ratio ">
                                                <img alt="" srcset="https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=220&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=f1861b3d4221b595bf92908f9c2f5c93 220w, https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=160&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=24b4b1aef3e4b537c8f8fc73de08b90d 160w, https://i.guim.co.uk/img/media/a3290158f9d021d543e4c9c386c6354993c199fd/0_582_2758_1654/master/2758.jpg?w=127&amp;q=85&amp;auto=format&amp;sharp=10&amp;s=57660040b46f0f5a40f5b4046af51f4a 127w" sizes="(min-width: 980px) 220px, (min-width: 740px) 160px, 127px">
                                            </div>
                                            <div class="rich-link__header">
                                                <h2 class="rich-link__title">
                                                    <a class="rich-link__link">How it feeds into age-old west v Islam narrative</a>
                                                </h2>
                                            </div>
                                            <div class="rich-link__standfirst u-cf">Republican candidate’s call for shutdown of US borders to Muslims will be seen by extremists as confirmation that war of ideals takes on yet another guise</div>
                                            <aside class="rich-link__meta">
                                            Paid for by <img src="gourmet.png">
                                        </aside>
                                            <a class="rich-link__link u-faux-block-link__overlay" href="#"></a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        } else {

            <!-- TODO implement a multi campaign -->
            @standardContainer(container, frontProperties)

        }
    }
}
