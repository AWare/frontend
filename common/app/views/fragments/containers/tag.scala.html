@(page: model.MetaData, collection: model.Collection, containerLayout: layout.ContainerLayout, containerIndex: Int, pagination: Option[common.Pagination] = None)(implicit request: RequestHeader, templateDeduping: views.support.TemplateDeduping, config: model.Config)

@import model.FaciaComponentName
@import views.html.fragments.containers.facia_cards.slice
@import views.html.fragments.keywordList
@import views.support.GetClasses
@import views.support.MostPopularTags.topTags
@import views.support.FootballTagPage

@defining(config.displayName.orElse(collection.displayName)) { title =>
    @if(collection.items.nonEmpty) {
        <section
            class="@GetClasses.forNewStyleContainer(config, false, title.nonEmpty, Seq("fc-container--first"))"
            data-link-name="@FaciaComponentName(config, collection)"
            data-id="@config.id"
            @config.sponsorshipKeyword.map { keyword =>
                data-keywords="@keyword"
            }
            data-component="@FaciaComponentName(config, collection)">
            <div class="facia-container__inner">
                <div class="container__header">
                    @FootballTagPage(page).asOpt.map{ footballTagPage =>
                        @fragments.containers.elements.footballTeamHeader(footballTagPage, collection)
                    }.getOrElse{
                        @title.map { title =>
                            @fragments.containers.elements.tagMeta(None, collection.href, page.description, title, page.isContributorPage)
                        }
                    }
                    @fragments.contributor(page)
                </div>
                <div class="container__body container--rolled-up-hide">
                    @for(sliceWithCards <- containerLayout.slices) {
                        @slice(sliceWithCards, containerIndex)
                    }
                </div>
                @pagination.map{ paginate => @fragments.pagination(page, paginate)}

                @defining(topTags(collection.items).filterNot(_.id == page.id)) { tags =>
                    @if(tags.nonEmpty) {
                        <div class="related-keywords">
                        @keywordList(tags, 5, "See also")
                        </div>
                    }
                }
            </div>
        </section>
    }
}
