@(metaData: model.MetaData)(implicit request: RequestHeader)
@import common._

@defining(Edition(request).navigation) { navigation =>
    @defining(Edition(request).briefNav) { briefNav =>
        <div class="@RenderClasses(Map(
                        ("navigation", true),
                        ("js-navigation-footer", true),
                        ("navigation--collapsed", true),
                        ("navigation--has-signposting", !Edition.isEditionFront),
                        ("navigation--has-local-navigation", Navigation.localLinks(navigation, metaData).nonEmpty)
                    ))" aria-hidden="true">
            <div class="gs-container">
                <div class="navigation__inner">
                    <div class="navigation__scroll">
                        <nav class="navigation__container navigation__container--second"
                             aria-label="Guardian sections" >
                            <ul class="top-navigation">
                                <li class="top-navigation__item top-navigation__item--home">
                                    <a href="@LinkTo{/}"
                                       class="top-navigation__action top-navigation__action--has-icon"
                                       data-link-name="nav : primary : home"
                                       title="Back to homepage">
                                        <span class="top-navigation__icon-wrapper">
                                            <span class="top-navigation__icon top-navigation__icon--home"></span>
                                        </span>
                                        <span class="u-h">home</span>
                                    </a>
                                </li>
                                @defining(Navigation.topLevelItem(navigation, metaData)){ topSection =>
                                    @briefNav.filterNot(Navigation.isEditionFront(_)).map{ nav =>
                                        <li class="@RenderClasses(Map(
                                                ("top-navigation__item", true),
                                                ("top-navigation__item--current", topSection.exists(_ == nav))
                                            ))">
                                            <a class="top-navigation__action" href="@LinkTo(nav.name.href)" data-link-name="nav : primary : @nav.name.title">
                                                @Html(nav.name.title)
                                                @if(nav.currentFor(metaData)){
                                                    <span class="u-h">selected</span>
                                                }
                                            </a>
                                        </li>
                                    }
                                }
                            </ul>
                        </nav>
                    </div>
                    <a class="navigation__toggle js-navigation-toggle" href="#footer-nav" data-link-name="nav : allSections" data-target-nav="js-navigation-footer">
                        <i class="navigation__toggle-burger honest-burger"><i></i><i></i><i></i></i>
                        <span class="navigation__toggle-label navigation__toggle-label--open">all<span class="navigation__toggle-label__extra"> sections</span></span>
                        <span class="navigation__toggle-label navigation__toggle-label--close">close</span>
                    </a>
                </div>
            </div>
        </div>
    }
}
