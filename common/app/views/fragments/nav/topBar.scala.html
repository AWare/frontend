@(metaData: model.MetaData)(implicit request: RequestHeader)
@import common._

@defining(Edition(request).navigation) { navigation =>
    <div class="@RenderClasses(Map(
                    ("new-navigation new-navigation--collapsed", true),
                    ("new-navigation--has-no-local-navigation", Navigation.localLinks(navigation, metaData).isEmpty),
                    ("new-navigation--has-local-navigation", Navigation.localLinks(navigation, metaData).nonEmpty)
                ))">
        <div class="gs-container">
            <div class="new-navigation__inner">
                <div class="new-navigation__scroll">
                    <div class="new-navigation__container new-navigation__container--first">
                        @Navigation.topLevelItem(navigation, metaData).map{ topSection =>
                            @if(topSection.links.nonEmpty){
                                @fragments.nav.signposting(metaData, navigation)
                            }
                            <ul class="local-navigation">
                                @Navigation.rotatedLocalNav(topSection, metaData).map{  link =>
                                    <li class="local-navigation__item"><a class="local-navigation__action" href="@LinkTo{@link.href}">@Html(link.title)</a></li>
                                }
                            </ul>
                        }
                    </div>

                    <div class="new-navigation__container new-navigation__container--second">
                        <ul class="top-navigation">
                            @navigation.map{ nav =>
                                <li class="@RenderClasses(Map(
                                        ("top-navigation__item", true),
                                        ("top-navigation__item--current", nav.currentFor(metaData)),
                                        ("top-navigation__item--home", Navigation.isEditionFront(nav))
                                    ))">
                                    <a class="top-navigation__action" href="@LinkTo(nav.name.href)" data-link-name="@nav.name.title">
                                        @Html(nav.name.title)
                                        @if(nav.currentFor(metaData)){
                                            <span class="u-h">selected</span>
                                        }
                                    </a>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
                <a class="new-navigation__toggle js-new-navigation-toggle" href="#footer-nav">
                    <i class="new-navigation__toggle-arrow arrow-box"></i>
                    <span class="new-navigation__toggle-label new-navigation__toggle-label--open">all<span class="new-navigation__toggle-label__extra"> sections</span></span>
                    <span class="new-navigation__toggle-label new-navigation__toggle-label--close">close</span>
                </a>
            </div>
            <div class="new-navigation__expandable">
                <div class="js-mega-nav-placeholder"></div>
            </div>
        </div>
    </div>
}
