@(metaData: model.MetaData)(implicit request: RequestHeader)
@import common._

@defining(Edition(request).navigation) { navigation =>
    @defining(Navigation.topLevelItem(navigation, metaData)) { topLevelSelected =>
        <nav role="navigation" aria-label="All sections">
            <ul class="global-navigation">
                @navigation.map { nav =>
                    <li class="@RenderClasses(Map(
                            ("global-navigation__section", true),
                            ("global-navigation__section--current", topLevelSelected.filter(_.name.href == nav.name.href).isDefined),
                            ("global-navigation__section--home", Navigation.isEditionFront(nav))
                        ))">
                        <a class="global-navigation__title" href="@LinkTo(nav.name.href)" data-link-name="nav : globalTop : @nav.name.title">
                            @Html(nav.name.title)
                            @if(nav.currentFor(metaData)) {
                                <span class="u-h">selected</span>
                            }
                        </a>
                        @if(nav.links.nonEmpty) {
                            <ul class="global-navigation__children">
                                @nav.links.map{ link =>
                                    <li class="global-navigation__child@if(link.currentFor(metaData)){ global-navigation__child--current}">
                                        <a class="global-navigation__action" href="@LinkTo(link.href)" data-link-name="nav : globalSub : @link.title">
                                            @Html(link.title)
                                            @if(link.currentFor(metaData)){
                                                <span class="u-h">selected</span>
                                            }
                                        </a>
                                    </li>
                                }
                            </ul>
                        }
                    </li>
                }
                <li class="global-navigation__section">
                    <span class="global-navigation__title global-navigation__title--guardian-services">from the guardian</span>
                    <ul class="global-navigation__children">
                    @if(Edition(request) == Uk){
                        <li class="global-navigation__child">
                            <a class="global-navigation__action" href="http://jobs.theguardian.com/?INTCMP=NGW_NAVBAR_UK_GU_JOBS" target="_blank" data-link-name="Jobs">jobs</a>
                        </li>
                        <li class="global-navigation__child">
                            <a class="global-navigation__action" href="https://soulmates.theguardian.com/?INTCMP=NGW_NAVBAR_UK_GU_SOULMATES" target="_blank" data-link-name="Soulmates">soulmates</a>
                        </li>
                        <li class="global-navigation__child">
                            <a class="global-navigation__action" href="http://www.theguardian.com/guardian-masterclasses?INTCMP=NGW_TOPNAV_UK_GU_MASTERCLASSES" target="_blank" data-link-name="Masterclasses">masterclasses</a>
                        </li>
                    }
                    @if(Edition(request) == Us){
                        <li class="global-navigation__child">
                            <a class="global-navigation__action" href="http://jobs.theguardian.com/?INTCMP=NGW_TOPNAV_US_GU_JOBS" target="_blank" data-link-name="Jobs">jobs</a>
                        </li>
                    }
                    @if(Edition(request) == Au){
                        <li class="global-navigation__child">
                            <a class="global-navigation__action" data-link-name="Jobs"
                               href="http://jobs.theguardian.com/?INTCMP=NGW_TOPNAV_US_GU_JOBS">jobs</a>
                        </li>
                        <li class="global-navigation__child">
                            <a class="global-navigation__action" data-link-name="Masterclasses"
                                href="http://www.theguardian.com/guardian-masterclasses/guardian-masterclasses-australia">masterclasses</a>
                        </li>
                    }
                    </ul>
                </li>
            </ul>
        </nav>
    }
}
