@(page: model.MetaData with tracking.TrackingParams, idRequest: services.IdentityRequest, idUrlBuilder: services.IdentityUrlBuilder, changePasswordForm: Form[(String, String, String)])(implicit request: RequestHeader)

@import form.IdFormHelpers._
@import views.html.fragments.form.{inputField, checkbox}
@import views.html.fragments.registrationFooter

@identityMain(page, conf.Switches.all){
}{
<div class="identity-wrapper monocolumn-wrapper">
    <h1 class="identity-title">Change password</h1>

    <form class="form js-register-form" novalidate action="@idUrlBuilder.buildUrl("/register", idRequest)" role="main" method="post">
        @if(changePasswordForm.globalError.isDefined) {
            <div class="form__error">@changePasswordForm.globalErrors.map(_.message).mkString(", ")</div>
        }

        <fieldset class="fieldset">
            <div class="fieldset__heading">
                <h2 class="form__heading">Change your Guardian account password</h2>
                <div class="form__note">All fields required.</div>
            </div>
            <div class="fieldset__fields">
                <ul class="unstyled">

                    @inputField(Password(changePasswordForm("oldPassword"), ('_label, "Old Password"), ('_help, "Between 6 and 20 characters"), ('class, "js-register-password"), ('tabindex, 1), ('maxlength, 20)))

                    @inputField(Password(changePasswordForm("newPassword1"), ('_label, "New Password"), ('_help, "Between 6 and 20 characters"), ('class, "js-register-password js-password-strength"), ('tabindex, 2), ('maxlength, 20)))

                    @inputField(Password(changePasswordForm("newPassword2"), ('_label, "Repeat New Password"), ('_help, "Between 6 and 20 characters"), ('class, "js-register-password"), ('tabindex, 3), ('maxlength, 20)))

                    <li class="form-field form-field__submit">
                        <button type="submit" class="submit-input" data-link-name="CHange password" tabindex="4">Change password</button>
                    </li>

                </ul>
            </div>
        </fieldset>
    </form>

    @registrationFooter(page, idRequest, idUrlBuilder)
</div>
}
