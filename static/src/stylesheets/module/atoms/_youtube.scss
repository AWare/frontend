@import '../../icons/video-icons-svg';

@mixin hide {
    visibility: hidden;
    opacity: 0;
}

@mixin show {
    visibility: visible;
    opacity: 1;
}

@mixin fade-in {
    @include show;
    transition: opacity 1s linear, visibility 0s;
}

@mixin fade-out {
    @include hide;
    transition: opacity 1s linear, visibility 1s;
}

.atom--media--youtube {
	position: relative;

	.atom--media--youtube--iframe,
	.atom--media--youtube--overlay,
	.atom--media--youtube--placeholder {
		height: 100%;
        width: 100%;
        position: absolute;
	}

	.atom--media--youtube--iframe {
		top: 1px;

        &:not(.youtube__video-ready),
        &.youtube__video-ended {
            ~ .atom--media--youtube--overlay .atom--media--youtube--controls {
                 @include hide;
            }
        }

        &.youtube__video-ready:not(.youtube__video-started) {
            ~ .atom--media--youtube--overlay .atom--media--youtube--controls {
                @include fade-in;    
            }
        }

        &.youtube__video-started:not(.youtube__video-ended) {
            ~ .atom--media--youtube--overlay,
            ~ .atom--media--youtube--overlay .atom--media--youtube--controls {
                @include fade-out;
                transition-delay: 500ms;
                transition-duration: 500ms;     
            }
        }

        &.youtube__video-ended.youtube__video-started {
            ~ .atom--media--youtube--overlay .atom--media--youtube--controls {
                @include fade-in;
            }
        }

	}

	.atom--media--youtube--overlay {
		// pointer-events: none;

		.atom--media--youtube--placeholder {
			background-size: cover;
	        background-position: 50% 50%;
	        background-repeat: no-repeat;
		}

		.atom--media--youtube--controls {
		    cursor: pointer;
		    position: absolute;
		    width: 100%;
		    height: 100%;
		    box-sizing: border-box;
		    text-align: center;

            &:hover {
                .atom--media--youtube--play-button {
                    transform: translate(-50%, -50%) scale(1.15);
                }
            }

            .atom--media--youtube--play-button {
                // Magic numbers are used here to draw the play arrow and circle as pseudo elements.
                @include video-play-button-size($vjs-small-button-size);
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                transition: transform 300ms cubic-bezier(.25, .46, .45, .94);
                user-select: none;

                @include mq(mobileLandscape) {
                    @include video-play-button-size($vjs-large-button-size);
                }

                &:before {
                    @include circular;
                    @include video-play-button-size($vjs-small-button-size);
                    content: '';
                    display: block;
                    @include mq(mobileLandscape) {
                        @include video-play-button-size($vjs-large-button-size);
                    }
                    background-color: $media-default;
                }

                &:after {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-40%, -50%);
                    border-style: solid;
                    border-width: 1em 0 1em 2.4em;
                    border-color: transparent transparent transparent $neutral-1;

                    @include mq(tablet) { // 0 border radius on mobile because stock android has a render bug with it here
                        border-radius: .2em;
                    }
                }
            }
		}
	}
}