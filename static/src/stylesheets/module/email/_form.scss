// TODO These mixins are here while we run the A/B test as the styles are custom to the email form but if they become perm then
// they should be made reusable

@mixin rounded-input--inline-button() {
    &text-input {
        border-right: 0;
        @include border-radius(1000px 0 0 1000px);
        float: left;
        width: 65%;
    }

    &submit-input {
        font-size: 12px;
        @include border-radius(0 1000px 1000px 0);
        border-left: 0;
        float: left;
        margin-right: 0;
        padding-left: 10px;
        width: 35%;
    }
}

.email-sub {
    overflow: hidden; // Check for clearfix
}

.email-sub__ { // Email subscription component namespace

    /**
     * Base Styles
     */

    &form {
        background-color: guss-colour(guardian-brand, $pasteup-palette);
        font-family: $f-sans-serif-text;
        padding: 20px;

        * {
            box-sizing: border-box;
        }

        &--is-hidden {
            display: none;
        }
    }

    &label {
        @include fs-textSans(3);
        color: $form-primary-colour;

        &--is-hidden {
            visibility: hidden;
        }
    }

    // Set with JS so we can use a real label
    // instead of abusing the placeholder attr
    // but displays correctly if JS doesn't load
    &inline-label--enabled {
        .email-sub__label {
            color: guss-colour(neutral-2, $pasteup-palette);
            line-height: 2;
            padding: 8px 15px 7px;
            position: absolute;
            pointer-events: none; // Ensure the text input cursor is shown
        }
    }

    &text-input {
        border: 1px solid $form-primary-colour;
        color: guss-colour(neutral-2, $pasteup-palette);
        display: inline-block;
        @include fs-textSans(3);
        line-height: 2;
        outline: none;
        padding: 8px 15px 7px;
        width: 100%;
    }

    &submit-input {
        border-color: $form-secondary-colour;
        color: $form-primary-colour;
        width: 100%;

        &:focus,
        &:hover {
            border-color: $form-primary-colour;
        }
    }

    &text-input,
    &submit-input {
        margin-bottom: 14.5px;
    }

    &small {
        color: $form-secondary-colour;
        display: block;
        text-align: center;
    }

    /**
     * Modifications
     */

    // FOOTER MODS
    &form--footer {
        background-color: transparent;
        margin-bottom: $gs-baseline;
        padding: 0 20px 0 0;

        .email-sub__ { // Namespace

            &text-input,
            &label,
            &submit-input {
                @include fs-textSans(1);
                line-height: 1.6;
            }

            &submit-input {
                background-color: #767676;
                border: 1px solid #767676;
            }

            &small {
                clear: left;
                color: $form-primary-colour;
                font-size: 12px;
            }

            @include mq($until: tablet) {
                @include rounded-input--inline-button();
            }

            @include mq(tablet, desktop) {
                &text-input {
                    @include border-radius(1000px);
                }

                &submit-input {
                    background-color: transparent;
                    margin-right: 0;
                    width: 100%;
                }
            }

            @include mq(desktop) {
                @include rounded-input--inline-button();
            }

        }

    }

    // LANDING PAGE MODS
    &form--landing {
        @include mq(tablet) {
            flex: 1;
            display: flex;
            align-content: center;
            justify-content: center;
            flex-direction: column;
        }

        .email-sub__ { // Namespace
            &text-input {
                border-color: $form-secondary-colour;
                @include border-radius(1000px);

                &:focus {
                    border-color: $form-primary-colour;
                }
            }
        }
    }

    &header--landing {
        @include mq(tablet) {
            flex: 2;
        }
    }
}

// TODO Fallbacks x-browser
@include mq(tablet) {
    .email-sub--landing {
        display: flex;
    }
}
