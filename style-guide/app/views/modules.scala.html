@(metaData:Page, article: Article, edition: String)(implicit request: RequestHeader)

@main(metaData, Switches.all){  }{

    <article>

        <header>
            <h1 class="article-zone type-1">@metaData.webTitle</h1>
        </header>

        @{
            val datelineHTML = fragments.dateline(article.webPublicationDate, article.isLive, edition).toString()
            fragments.module("dateline", "Dateline", datelineHTML, "Will show a 'LIVE' label where the content is a currently-updating liveblog.")
        }

        @{
            val headlineHTML = fragments.headline(article.headline).toString()
            fragments.module("headline", "Headline", headlineHTML)
        }

        @{
            val standfirstHTML = fragments.standfirst(article).toString()
            fragments.module("standfirst", "Standfirst", standfirstHTML)
        }

        @article.mainPicture.map{ mainPicture =>
            @article.mainPicture(width=220).map{ smallCrop =>
                @{
                    var mainPictureHTML = "<figure itemprop='associatedMedia primaryImageOfPage' itemscope itemtype='http://schema.org/ImageObject'>\r\n\t<img class='maxed main-image'\r\n\t\tsrc='" + smallCrop.url.get + "'\r\n\t\tdata-force-upgrade='true'\r\n\t\tdata-thumb-width='" + smallCrop.width + "'\r\n\t\tdata-fullsrc='" + mainPicture.url.get + "'\r\n\t\tdata-full-width='" + mainPicture.width + "'\r\n\t\titemprop='contentURL' />"
                    if(smallCrop.caption.headOption.getOrElse("").trim != "") {
                        mainPictureHTML += "\r\n\t<figcaption class='main-caption' itemprop='description'>\r\n\t\t" + Html(smallCrop.caption.getOrElse("")) + "\r\n\t</figcaption>"
                    }
                    mainPictureHTML += "\r\n</figure>".toString()
                    fragments.module("main-picture", "Main Picture", mainPictureHTML, "Makes use of our responsive images technique &ndash; images are replaced with their 'fullsrc' version if the connection is speed is fast enough and the device width is large enough. Images can be forced to upgrade regardless of these tests by adding the 'force-upgrade' data attribute, as used here. Images will not be upgraded if the width of the 'fullsrc' image is not greater than the thumbnail width.")
                }
            }
        }

    </article>

}