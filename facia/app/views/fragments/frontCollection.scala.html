@(front: model.FaciaPage, block: (com.gu.facia.client.models.CollectionConfig, model.Collection), collectionsSize: Int = 1, index: Int = 1, dataId: String)(implicit request: RequestHeader, templateDeduping: views.support.TemplateDeduping)

@import layout.ContainerLayout
@import views.support._
@import views.html.fragments.containers
@import slices.{FixedContainers, DynamicContainers}

@* This nastiness will go once everything moves to the new Facia Cards pattern *@

@defining(block){ case (config, collection) =>
    @config.collectionType match {
        case Some("nav/list")                   => { @containers.navlist(collection, index, dataId)(request, config) }
        case Some("nav/media-list")             => { @containers.navmedialist(collection, index, dataId)(request, config) }
        case Some("news/most-popular")          => { @containers.popular(collection, PopularContainer(), index, dataId)(request, config) }
        case collectionType => {
            @DynamicContainers(collectionType, collection.items) match {
                case Some(containerDefinition) => {
                    @containers.facia_cards.container(collection, ContainerLayout(containerDefinition, collection, None), index, front.frontProperties, dataId = dataId)(request, templateDeduping, config)
                }

                case None => {
                    @containers.facia_cards.container(collection, ContainerLayout(FixedContainers.fixedSmallSlowIV, collection, None), index, front.frontProperties, dataId)(request, templateDeduping, config)
                }
            }
        }
    }
}
