@(index: services.IndexPage)(implicit request: RequestHeader)

@import views.support.RenderClasses
@import views.html.fragments.pagination
@import services.IndexPage
@import model.FrontProperties.empty
@import common.Edition

<div class="l-side-margins l-side-margins--layout-front">
    <div class="@RenderClasses(Map(
            "facia-container" -> true,
            "facia-container--layout-front" -> true,
            "facia-container--sponsored" -> index.page.isSponsored,
            "facia-container--advertisement-feature" -> index.page.isAdvertisementFeature,
            "facia-container--foundation-supported" -> index.page.isFoundationSupported,
            "js-sponsored-front" -> (index.page.isSponsored || index.page.isAdvertisementFeature || index.page.isFoundationSupported)))"
        data-link-name="Front | @request.path"
        @index.page.sponsor.map { sponsor =>
            data-sponsor="@sponsor"
        }
        @index.page.sponsorshipType.map { sponsorshipType =>
            data-sponsorship="@sponsorshipType"
        }
        role="main">

        @** TODO This should appear in the first container
        <div class="fc-container__header js-container__header">
            @FootballTagPage(page).asOpt.map{ footballTagPage =>
                @fragments.containers.elements.footballTeamHeader(footballTagPage, collection)
            }.getOrElse{
                @title.map { title =>
                    @fragments.containers.elements.tagMeta(None, collection.href, page.description, title, page.isContributorPage)
                }
            }
            @fragments.contributor(page)
        </div>
        *@


        @defining(IndexPage.makeFront(index, Edition(request)).containers) { containers =>
            @containers.map { containerDefinition =>
                @fragments.containers.facia_cards.container(containerDefinition, empty)
            }
        }

        @index.page.pagination.map { paginate => @pagination(index.page, paginate) }

        @fragments.trendingTopics(index.trails, index.page.id)

        @fragments.commercial.commercialComponent()
    </div>
</div>
