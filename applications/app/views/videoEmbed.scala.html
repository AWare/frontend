@(page: EmbedPage)(implicit request: RequestHeader)

@import model.{Video, VideoPlayer}
@import views.support.{Video640}

<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <title>page.title</title>
    </head>
    <body>

        @if(page.isExpired) {
            <div class="gu-video-embed gu-video-embed--expired">
                <h1>Sorry - this page has been removed.</h1>

                <div class="gu-video-embed__message">
                    <p>This could be because it launched early, our rights have expired, there was a legal issue, or for another reason.</p>
                </div>
            </div>

        } else {

            @page.model.map{ video: Video =>

                <figure class="gu-video-embed" itemprop="video" itemscope itemtype="http://schema.org/VideoObject">
                    <meta itemprop="name" content="@Html(video.headline)"/>
                    <meta itemprop="headline" content="@Html(video.headline)"/>
                    <meta itemprop="url" content="@video.url"/>
                    @video.trailText.map{ t =>
                        <meta itemprop="description" content="@StripHtmlTags(t)" />
                        <meta itemprop="about" content="@StripHtmlTags(t)" />
                    }

                    <meta itemprop="datePublished" content="@video.webPublicationDate.toString("yyyy-MM-dd")" />
                    <meta itemprop="name" content="@video.webTitle" />
                    <meta itemprop="uploadDate" content="@video.webPublicationDate.toString("yyyy-MM-dd")" />
                    @video.mainVideo.map { mv =>
                        <meta itemprop="duration" content="@mv.ISOduration" />
                        <meta itemprop="height" content="@mv.height" />
                        <meta itemprop="width" content="@mv.width" />
                    }
                    <meta itemprop="requiresSubscription" content="no" />
                    <meta itemprop="image" content="@video.openGraphImage" />
                    @video.thumbnail.map{ img => <meta itemprop="thumbnail" content="@SeoOptimisedContentImage.bestFor(img)" /> }
                    @video.mainVideo.map { videoElement =>
                        @fragments.media.video(VideoPlayer(
                            videoElement,
                            Video640,
                            video.headline,
                            autoPlay = true,
                            showControlsAtStart = true,
                            endSlatePath = video.endSlatePath,
                            None
                        ))
                    }
                </figure>

            }

        }

    </body>
</html>
